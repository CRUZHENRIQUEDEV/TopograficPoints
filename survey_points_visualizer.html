<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Gate de Prote√ß√£o - Bloqueia execu√ß√£o em dom√≠nios n√£o autorizados -->
    <script>
      (function () {
        const allowedOrigins = [
          "https://cruzhenriquedev.github.io",
          "https://cruzhenriquedev.github.io/TopograficPoints",
        ];

        const isFileProtocol = location.protocol === "file:";
        const isNotHttps = location.protocol !== "https:";
        const originNotAllowed = !allowedOrigins.some(
          (o) => location.origin === o || location.href.startsWith(o),
        );

        if (isFileProtocol || isNotHttps || originNotAllowed) {
          document.write("");
          document.close();
          window.stop && window.stop();
          return;
        }
      })();
    </script>

    <title>Analisador de Inclina√ß√µes e Esconsidade - Tabuleiros de Ponte</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f5f5f5;
      }

      .container {
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      h1 {
        color: #333;
        text-align: center;
        margin-bottom: 10px;
      }

      .subtitle {
        text-align: center;
        color: #666;
        margin-bottom: 30px;
        font-size: 14px;
        padding: 10px;
        background: linear-gradient(135deg, #e3f2fd, #f3e5f5);
        border-radius: 8px;
        border: 1px solid #2196f3;
      }

      /* Se√ß√£o dos diagramas de esconsidade */
      .esconsidade-diagrams {
        margin: 30px 0;
        padding: 20px;
        background: linear-gradient(135deg, #f8f9fa, #ffffff);
        border: 2px solid #007bff;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .esconsidade-diagrams h2 {
        text-align: center;
        color: #007bff;
        margin-bottom: 15px;
        font-size: 24px;
      }

      .diagrams-container {
        display: flex;
        justify-content: center;
        margin-bottom: 20px;
      }

      .diagrams-container svg {
        max-width: 100%;
        height: auto;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .diagram-explanation {
        background: #e3f2fd;
        padding: 15px;
        border-radius: 8px;
        border-left: 4px solid #2196f3;
        margin-top: 15px;
      }

      .diagram-explanation h3 {
        color: #1976d2;
        margin-top: 0;
        margin-bottom: 10px;
      }

      .diagram-explanation ul {
        margin: 0;
        padding-left: 20px;
      }

      .diagram-explanation li {
        margin-bottom: 8px;
        color: #1565c0;
      }

      .input-section {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 30px;
      }

      .csv-input {
        display: flex;
        flex-direction: column;
      }

      .csv-input label {
        font-weight: bold;
        margin-bottom: 10px;
        color: #333;
      }

      textarea {
        width: 100%;
        height: 200px;
        padding: 10px;
        border: 2px solid #ddd;
        border-radius: 5px;
        font-family: monospace;
        font-size: 12px;
        resize: vertical;
      }

      button {
        background: #007bff;
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin: 10px 5px;
      }

      button:hover {
        background: #0056b3;
      }

      .controls {
        text-align: center;
        margin: 20px 0;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-wrap: wrap;
        gap: 10px;
      }

      .zoom-controls {
        display: flex;
        align-items: center;
        background: #f8f9fa;
        padding: 8px 15px;
        border-radius: 25px;
        border: 1px solid #dee2e6;
        margin-left: 20px;
        flex-wrap: wrap;
        gap: 5px;
      }

      @media (max-width: 768px) {
        .controls {
          flex-direction: column;
          gap: 15px;
        }

        .zoom-controls {
          margin-left: 0;
          width: 100%;
          justify-content: center;
        }

        .esconsidade-diagrams {
          margin: 20px 0;
          padding: 15px;
        }

        .esconsidade-diagrams h2 {
          font-size: 20px;
        }
      }

      .zoom-controls button {
        margin: 0 5px;
        padding: 6px 10px;
        font-size: 14px;
        min-width: 40px;
      }

      #zoomLevel {
        margin: 0 15px;
        font-weight: bold;
        color: #495057;
        font-size: 14px;
        min-width: 80px;
        text-align: center;
      }

      .visualization {
        border: 2px solid #ddd;
        border-radius: 10px;
        background: white;
        min-height: 500px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 20px;
      }

      #canvas {
        border: 1px solid #ccc;
        background: #fafafa;
      }

      .info-panel {
        margin-top: 20px;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 5px;
        border-left: 4px solid #007bff;
      }

      .distance-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 12px;
        margin-top: 15px;
      }

      .distance-card {
        background: white;
        padding: 12px;
        border-radius: 5px;
        border: 1px solid #ddd;
        text-align: center;
        transition: transform 0.2s;
      }

      .distance-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      .section-divider {
        grid-column: 1 / -1;
        height: 1px;
        background: linear-gradient(to right, transparent, #ddd, transparent);
        margin: 15px 0;
      }

      .distance-value {
        font-size: 18px;
        font-weight: bold;
        color: #007bff;
      }

      .elevation-value {
        font-size: 16px;
        font-weight: bold;
      }

      .inclination-value {
        font-size: 14px;
        font-weight: bold;
      }

      .cross-distance-card {
        background: linear-gradient(135deg, #fff3e0, #e8f5e8);
        border: 2px solid #ff9800;
      }

      .cross-distance-value {
        color: #ff9800;
      }

      .elevation-analysis-card {
        background: linear-gradient(135deg, #e8f5e8, #f3e5f5);
        border: 2px solid #4caf50;
      }

      .warning-card {
        background: linear-gradient(135deg, #fff3e0, #ffebee);
        border: 2px solid #ff5722;
      }

      .critical-warning-card {
        background: linear-gradient(135deg, #ffebee, #fce4ec);
        border: 3px solid #d32f2f;
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% {
          box-shadow: 0 0 0 0 rgba(211, 47, 47, 0.4);
        }
        70% {
          box-shadow: 0 0 0 10px rgba(211, 47, 47, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(211, 47, 47, 0);
        }
      }

      .good-card {
        background: linear-gradient(135deg, #e8f5e8, #f1f8e9);
        border: 2px solid #4caf50;
      }

      .acceptable-card {
        background: linear-gradient(135deg, #fff8e1, #f3e5f5);
        border: 2px solid #ff9800;
      }

      .error {
        color: #dc3545;
        background: #f8d7da;
        padding: 10px;
        border-radius: 5px;
        margin-top: 10px;
      }

      .csv-section {
        border: 1px solid #ddd;
        border-radius: 5px;
        padding: 15px;
        background: #fafafa;
      }

      .section-title {
        color: #007bff;
        font-size: 18px;
        margin-bottom: 10px;
        font-weight: bold;
      }

      .example-buttons {
        margin-top: 10px;
      }

      .example-btn {
        background: #28a745;
        font-size: 14px;
        padding: 8px 16px;
      }

      .example-btn:hover {
        background: #218838;
      }

      .cross-section {
        background: linear-gradient(135deg, #fff3e0, #e8f5e8);
        border: 2px solid #ff9800;
        margin: 20px 0 10px 0;
        grid-column: 1 / -1;
        text-align: center;
      }

      .structure-section {
        background: linear-gradient(135deg, #e3f2fd, #f3e5f5);
        border: 2px solid #9c27b0;
        margin: 15px 0 5px 0;
        grid-column: 1 / -1;
        text-align: center;
      }

      .elevation-section {
        background: linear-gradient(135deg, #e8f5e8, #f3e5f5);
        border: 2px solid #4caf50;
        margin: 15px 0 5px 0;
        grid-column: 1 / -1;
        text-align: center;
      }

      .legend {
        margin: 10px 0;
        padding: 10px;
        background: #f8f9fa;
        border-radius: 5px;
        font-size: 12px;
      }

      .legend-item {
        display: inline-block;
        margin: 0 10px;
      }

      .legend-color {
        display: inline-block;
        width: 15px;
        height: 15px;
        border-radius: 3px;
        margin-right: 5px;
        vertical-align: middle;
      }

      .debug-info {
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 5px;
        padding: 10px;
        margin: 10px 0;
        font-family: monospace;
        font-size: 12px;
        max-height: 200px;
        overflow-y: auto;
      }

      .limits-info {
        background: linear-gradient(135deg, #e3f2fd, #f8f9fa);
        border: 2px solid #1976d2;
        border-radius: 8px;
        padding: 15px;
        margin: 20px 0;
        text-align: center;
      }

      .limits-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        margin-top: 10px;
      }

      .limit-item {
        background: white;
        padding: 10px;
        border-radius: 5px;
        border: 1px solid #1976d2;
      }

      .methodology-section {
        margin-top: 25px;
        padding: 15px;
        background: linear-gradient(135deg, #f8f9fa, #e9ecef);
        border-radius: 8px;
        border: 2px solid #6c757d;
      }

      .methodology-grid {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 15px;
        margin-top: 15px;
      }

      .methodology-card {
        background: white;
        padding: 12px;
        border-radius: 6px;
        border: 2px solid;
      }

      .methodology-transversal {
        border-color: #d32f2f;
      }

      .methodology-longitudinal {
        border-color: #ff9800;
      }

      .methodology-skew {
        border-color: #2196f3;
      }

      @media (max-width: 768px) {
        .methodology-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üåâ Analisador de Inclina√ß√µes e Esconsidade - Tabuleiros de Ponte</h1>
      <div class="subtitle">
        <strong
          >üìê Verifica√ß√£o de Conformidade T√©cnica com An√°lise de Esconsidade e
          Detec√ß√£o Autom√°tica SIRGAS 2000</strong
        ><br />
        Sistema de an√°lise autom√°tica de inclina√ß√µes transversais, longitudinais
        e √¢ngulo de esconsidade para tabuleiros de ponte<br />
        <small style="color: #1976d2"
          >üó∫Ô∏è Detec√ß√£o autom√°tica da zona SIRGAS 2000 | üìê C√°lculo de largura
          √∫til | Suporte para m√∫ltiplos formatos CSV</small
        >
      </div>

      <!-- Informa√ß√µes dos Limites -->
      <div class="limits-info">
        <h3 style="margin: 0 0 10px 0; color: #1976d2">
          üìè Limites T√©cnicos Recomendados para Inclina√ß√µes
        </h3>
        <div class="limits-grid">
          <div class="limit-item">
            <div style="font-weight: bold; color: #d32f2f">
              üîÑ TRANSVERSAL (LD ‚Üî LE)
            </div>
            <div style="font-size: 18px; font-weight: bold; color: #d32f2f">
              ‚â§ 5,00%
            </div>
            <div style="font-size: 12px; color: #666">
              Lado com lado no mesmo ponto
            </div>
            <div style="font-size: 11px; color: #999">
              In√≠cio‚ÜîIn√≠cio | Final‚ÜîFinal
            </div>
          </div>
          <div class="limit-item">
            <div style="font-weight: bold; color: #ff9800">
              ‚ÜïÔ∏è LONGITUDINAL (In√≠cio ‚Üî Final)
            </div>
            <div style="font-size: 18px; font-weight: bold; color: #ff9800">
              ‚â§ 2,50%
            </div>
            <div style="font-size: 12px; color: #666">
              Mesmo lado entre pontos
            </div>
            <div style="font-size: 11px; color: #999">LD‚ÜîLD | LE‚ÜîLE</div>
          </div>
        </div>
        <div style="margin-top: 10px; font-size: 12px; color: #1976d2">
          <strong>Nota:</strong> Valores baseados em boas pr√°ticas da engenharia
          de pontes<br />
          <strong>Regra de Verifica√ß√£o:</strong> Transversal = lado com lado no
          mesmo ponto | Longitudinal = mesmo lado entre pontos
        </div>
      </div>

      <!-- Se√ß√£o de Informa√ß√µes de Rodovias DNIT -->
      <div
        id="rodoviaInfo"
        class="limits-info"
        style="
          display: none;
          background: linear-gradient(135deg, #fff3e0, #e8f5e8);
          border: 2px solid #ff9800;
        "
      >
        <h3 style="margin: 0 0 10px 0; color: #e65100">
          üõ£Ô∏è Informa√ß√µes da Rodovia (DNIT)
        </h3>
        <div id="rodoviaContent" class="limits-grid">
          <!-- Conte√∫do ser√° preenchido dinamicamente -->
        </div>
        <div
          style="
            margin-top: 8px;
            font-size: 11px;
            color: #e65100;
            text-align: center;
          "
        >
          <strong>Fonte:</strong> API DNIT - Consulta autom√°tica baseada nas
          coordenadas dos pontos
        </div>
      </div>

      <!-- Se√ß√£o de Diagramas de Esconsidade -->
      <div class="esconsidade-diagrams">
        <h2>üìê Conceitos de Esconsidade em Tabuleiros de Ponte</h2>

        <div class="diagrams-container">
          <svg viewBox="0 0 1200 500" xmlns="http://www.w3.org/2000/svg">
            <!-- Defini√ß√µes de gradientes e filtros -->
            <defs>
              <!-- Gradiente para o rio -->
              <linearGradient
                id="riverGradient"
                x1="0%"
                y1="0%"
                x2="100%"
                y2="100%"
              >
                <stop
                  offset="0%"
                  style="stop-color: #64b5f6; stop-opacity: 1"
                />
                <stop
                  offset="100%"
                  style="stop-color: #1e88e5; stop-opacity: 1"
                />
              </linearGradient>

              <!-- Gradiente para o tabuleiro -->
              <linearGradient
                id="deckGradient"
                x1="0%"
                y1="0%"
                x2="100%"
                y2="100%"
              >
                <stop
                  offset="0%"
                  style="stop-color: #f5f5f5; stop-opacity: 1"
                />
                <stop
                  offset="100%"
                  style="stop-color: #e0e0e0; stop-opacity: 1"
                />
              </linearGradient>

              <!-- Gradiente para a rodovia -->
              <linearGradient
                id="roadGradient"
                x1="0%"
                y1="0%"
                x2="100%"
                y2="100%"
              >
                <stop
                  offset="0%"
                  style="stop-color: #616161; stop-opacity: 1"
                />
                <stop
                  offset="100%"
                  style="stop-color: #424242; stop-opacity: 1"
                />
              </linearGradient>

              <!-- Sombra -->
              <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
                <feDropShadow
                  dx="3"
                  dy="3"
                  stdDeviation="3"
                  flood-opacity="0.3"
                />
              </filter>

              <!-- Sombra suave -->
              <filter
                id="softShadow"
                x="-50%"
                y="-50%"
                width="200%"
                height="200%"
              >
                <feDropShadow
                  dx="2"
                  dy="2"
                  stdDeviation="2"
                  flood-opacity="0.2"
                />
              </filter>
            </defs>

            <!-- T√≠tulo principal -->
            <rect
              x="25"
              y="10"
              width="1150"
              height="50"
              fill="#FFFFFF"
              stroke="#E0E0E0"
              stroke-width="1"
              rx="8"
              filter="url(#softShadow)"
            />
            <text
              x="600"
              y="35"
              text-anchor="middle"
              font-size="18"
              font-weight="700"
              fill="#2C3E50"
              font-family="Arial, sans-serif"
            >
              Tipos de Esconsidade no Tabuleiro da Ponte
            </text>
            <text
              x="600"
              y="50"
              text-anchor="middle"
              font-size="12"
              fill="#5D6D7E"
              font-family="Arial, sans-serif"
            >
              Influ√™ncia da orienta√ß√£o do rio na geometria do tabuleiro
            </text>

            <!-- Caso 1: SEM Esconsidade -->
            <g transform="translate(80, 80)">
              <!-- Card container -->
              <rect
                x="0"
                y="0"
                width="280"
                height="320"
                fill="#FFFFFF"
                stroke="#E8EAF0"
                stroke-width="2"
                rx="12"
                filter="url(#shadow)"
              />

              <!-- Header do card -->
              <rect
                x="0"
                y="0"
                width="280"
                height="45"
                fill="#4CAF50"
                rx="12"
              />
              <rect x="0" y="33" width="280" height="12" fill="#4CAF50" />
              <text
                x="140"
                y="20"
                text-anchor="middle"
                font-size="12"
                font-weight="600"
                fill="#FFFFFF"
                font-family="Arial, sans-serif"
              >
                CASO 1 - SEM ESCONSIDADE
              </text>
              <text
                x="140"
                y="35"
                text-anchor="middle"
                font-size="10"
                fill="#E8F5E8"
                font-family="Arial, sans-serif"
              >
                Rio Norte-Sul (Perpendicular)
              </text>

              <!-- Conte√∫do -->
              <g transform="translate(30, 60)">
                <!-- Rio vertical (mais estreito que a ponte) -->
                <rect
                  x="85"
                  y="10"
                  width="40"
                  height="150"
                  fill="url(#riverGradient)"
                  stroke="#1565C0"
                  stroke-width="2"
                  rx="6"
                  filter="url(#softShadow)"
                />

                <!-- Setas do rio -->
                <polygon points="100,20 110,20 105,30" fill="#0D47A1" />
                <polygon points="100,150 110,150 105,140" fill="#0D47A1" />
                <text
                  x="120"
                  y="17"
                  font-size="10"
                  fill="#0D47A1"
                  font-weight="600"
                >
                  N
                </text>
                <text
                  x="120"
                  y="163"
                  font-size="10"
                  fill="#0D47A1"
                  font-weight="600"
                >
                  S
                </text>

                <!-- Rodovia -->
                <rect
                  x="10"
                  y="70"
                  width="180"
                  height="30"
                  fill="url(#roadGradient)"
                  stroke="#212121"
                  stroke-width="1"
                  rx="3"
                  filter="url(#softShadow)"
                />

                <!-- Tabuleiro retangular -->
                <rect
                  x="75"
                  y="62"
                  width="60"
                  height="46"
                  fill="url(#deckGradient)"
                  stroke="#9E9E9E"
                  stroke-width="2"
                  rx="3"
                  filter="url(#softShadow)"
                />

                <!-- Faixas de rolamento -->
                <line
                  x1="75"
                  y1="72"
                  x2="135"
                  y2="72"
                  stroke="#FFD54F"
                  stroke-width="2"
                  stroke-dasharray="15,6"
                />
                <line
                  x1="75"
                  y1="85"
                  x2="135"
                  y2="85"
                  stroke="#FFFFFF"
                  stroke-width="1"
                />
                <line
                  x1="75"
                  y1="98"
                  x2="135"
                  y2="98"
                  stroke="#FFD54F"
                  stroke-width="2"
                  stroke-dasharray="15,6"
                />

                <!-- Guardas -->
                <rect
                  x="75"
                  y="59"
                  width="60"
                  height="3"
                  fill="#757575"
                  rx="1"
                />
                <rect
                  x="75"
                  y="108"
                  width="60"
                  height="3"
                  fill="#757575"
                  rx="1"
                />

                <!-- √Çngulo -->
                <path
                  d="M 90 50 L 105 50 L 105 65"
                  fill="none"
                  stroke="#4CAF50"
                  stroke-width="3"
                />
                <text
                  x="72"
                  y="47"
                  font-size="12"
                  fill="#4CAF50"
                  font-weight="700"
                >
                  90¬∞
                </text>
              </g>

              <!-- Info box -->
              <rect
                x="15"
                y="260"
                width="250"
                height="45"
                fill="#E8F5E8"
                stroke="#4CAF50"
                stroke-width="1"
                rx="6"
              />
              <text
                x="25"
                y="275"
                font-size="10"
                fill="#2E7D32"
                font-weight="600"
              >
                ‚úì Tabuleiro Retangular
              </text>
              <text x="25" y="287" font-size="10" fill="#2E7D32">
                ‚úì C√°lculo Estrutural Padr√£o
              </text>
              <text x="25" y="299" font-size="10" fill="#2E7D32">
                ‚úì Execu√ß√£o Convencional
              </text>
            </g>

            <!-- Caso 2: COM Esconsidade (NO-SE) -->
            <g transform="translate(390, 80)">
              <!-- Card container -->
              <rect
                x="0"
                y="0"
                width="280"
                height="320"
                fill="#FFFFFF"
                stroke="#E8EAF0"
                stroke-width="2"
                rx="12"
                filter="url(#shadow)"
              />

              <!-- Header do card -->
              <rect
                x="0"
                y="0"
                width="280"
                height="45"
                fill="#FF9800"
                rx="12"
              />
              <rect x="0" y="33" width="280" height="12" fill="#FF9800" />
              <text
                x="140"
                y="20"
                text-anchor="middle"
                font-size="12"
                font-weight="600"
                fill="#FFFFFF"
                font-family="Arial, sans-serif"
              >
                CASO 2 - COM ESCONSIDADE
              </text>
              <text
                x="140"
                y="35"
                text-anchor="middle"
                font-size="10"
                fill="#FFF3E0"
                font-family="Arial, sans-serif"
              >
                Rio Noroeste-Sudeste
              </text>

              <!-- Conte√∫do -->
              <g transform="translate(30, 60)">
                <!-- Rio diagonal NO-SE (mesmo √¢ngulo da esconsidade, mais estreito) -->
                <polygon
                  points="85,15 115,15 145,125 115,125"
                  fill="url(#riverGradient)"
                  stroke="#1565C0"
                  stroke-width="2"
                  filter="url(#softShadow)"
                />

                <!-- Setas do rio -->
                <polygon points="95,25 105,21 100,31" fill="#0D47A1" />
                <polygon points="125,115 135,111 130,121" fill="#0D47A1" />
                <text
                  x="75"
                  y="10"
                  font-size="10"
                  fill="#0D47A1"
                  font-weight="600"
                >
                  NO
                </text>
                <text
                  x="145"
                  y="140"
                  font-size="10"
                  fill="#0D47A1"
                  font-weight="600"
                >
                  SE
                </text>

                <!-- Rodovia -->
                <rect
                  x="10"
                  y="70"
                  width="180"
                  height="30"
                  fill="url(#roadGradient)"
                  stroke="#212121"
                  stroke-width="1"
                  rx="3"
                  filter="url(#softShadow)"
                />

                <!-- Tabuleiro esconso (paralelogramo) -->
                <polygon
                  points="65,62 125,62 140,108 80,108"
                  fill="url(#deckGradient)"
                  stroke="#9E9E9E"
                  stroke-width="2"
                  filter="url(#softShadow)"
                />

                <!-- Faixas de rolamento esconsas -->
                <line
                  x1="70"
                  y1="72"
                  x2="130"
                  y2="72"
                  stroke="#FFD54F"
                  stroke-width="2"
                  stroke-dasharray="15,6"
                />
                <line
                  x1="75"
                  y1="85"
                  x2="135"
                  y2="85"
                  stroke="#FFFFFF"
                  stroke-width="1"
                />
                <line
                  x1="80"
                  y1="98"
                  x2="140"
                  y2="98"
                  stroke="#FFD54F"
                  stroke-width="2"
                  stroke-dasharray="15,6"
                />

                <!-- Guardas esconsas -->
                <polygon points="65,59 125,59 127,62 67,62" fill="#757575" />
                <polygon
                  points="80,108 140,108 142,111 82,111"
                  fill="#757575"
                />

                <!-- √Çngulo de esconsidade -->
                <path
                  d="M 85 50 L 100 50 L 105 65"
                  fill="none"
                  stroke="#FF9800"
                  stroke-width="3"
                />
                <text
                  x="70"
                  y="47"
                  font-size="12"
                  fill="#FF9800"
                  font-weight="700"
                >
                  Œ± ‚â† 90¬∞
                </text>
              </g>

              <!-- Info box -->
              <rect
                x="15"
                y="260"
                width="250"
                height="45"
                fill="#FFF3E0"
                stroke="#FF9800"
                stroke-width="1"
                rx="6"
              />
              <text
                x="25"
                y="275"
                font-size="10"
                fill="#E65100"
                font-weight="600"
              >
                ‚ö† Tabuleiro Esconso
              </text>
              <text x="25" y="287" font-size="10" fill="#E65100">
                ‚ö† C√°lculo Mais Complexo
              </text>
              <text x="25" y="299" font-size="10" fill="#E65100">
                ‚ö† Formas Especiais
              </text>
            </g>

            <!-- Caso 3: COM Esconsidade (NE-SO) -->
            <g transform="translate(700, 80)">
              <!-- Card container -->
              <rect
                x="0"
                y="0"
                width="280"
                height="320"
                fill="#FFFFFF"
                stroke="#E8EAF0"
                stroke-width="2"
                rx="12"
                filter="url(#shadow)"
              />

              <!-- Header do card -->
              <rect
                x="0"
                y="0"
                width="280"
                height="45"
                fill="#F44336"
                rx="12"
              />
              <rect x="0" y="33" width="280" height="12" fill="#F44336" />
              <text
                x="140"
                y="20"
                text-anchor="middle"
                font-size="12"
                font-weight="600"
                fill="#FFFFFF"
                font-family="Arial, sans-serif"
              >
                CASO 3 - COM ESCONSIDADE
              </text>
              <text
                x="140"
                y="35"
                text-anchor="middle"
                font-size="10"
                fill="#FFEBEE"
                font-family="Arial, sans-serif"
              >
                Rio Nordeste-Sudoeste
              </text>

              <!-- Conte√∫do -->
              <g transform="translate(30, 60)">
                <!-- Rio diagonal NE-SO (mesmo √¢ngulo da esconsidade, mais estreito) -->
                <polygon
                  points="115,15 145,15 115,125 85,125"
                  fill="url(#riverGradient)"
                  stroke="#1565C0"
                  stroke-width="2"
                  filter="url(#softShadow)"
                />

                <!-- Setas do rio -->
                <polygon points="135,25 125,21 130,31" fill="#0D47A1" />
                <polygon points="105,115 95,111 100,121" fill="#0D47A1" />
                <text
                  x="150"
                  y="10"
                  font-size="10"
                  fill="#0D47A1"
                  font-weight="600"
                >
                  NE
                </text>
                <text
                  x="70"
                  y="140"
                  font-size="10"
                  fill="#0D47A1"
                  font-weight="600"
                >
                  SO
                </text>

                <!-- Rodovia -->
                <rect
                  x="10"
                  y="70"
                  width="180"
                  height="30"
                  fill="url(#roadGradient)"
                  stroke="#212121"
                  stroke-width="1"
                  rx="3"
                  filter="url(#softShadow)"
                />

                <!-- Tabuleiro esconso oposto -->
                <polygon
                  points="80,62 140,62 125,108 65,108"
                  fill="url(#deckGradient)"
                  stroke="#9E9E9E"
                  stroke-width="2"
                  filter="url(#softShadow)"
                />

                <!-- Faixas de rolamento esconsas -->
                <line
                  x1="85"
                  y1="72"
                  x2="135"
                  y2="72"
                  stroke="#FFD54F"
                  stroke-width="2"
                  stroke-dasharray="15,6"
                />
                <line
                  x1="80"
                  y1="85"
                  x2="130"
                  y2="85"
                  stroke="#FFFFFF"
                  stroke-width="1"
                />
                <line
                  x1="75"
                  y1="98"
                  x2="125"
                  y2="98"
                  stroke="#FFD54F"
                  stroke-width="2"
                  stroke-dasharray="15,6"
                />

                <!-- Guardas esconsas -->
                <polygon points="80,59 140,59 138,62 78,62" fill="#757575" />
                <polygon
                  points="65,108 125,108 123,111 63,111"
                  fill="#757575"
                />

                <!-- √Çngulo de esconsidade -->
                <path
                  d="M 120 50 L 135 50 L 130 65"
                  fill="none"
                  stroke="#F44336"
                  stroke-width="3"
                />
                <text
                  x="140"
                  y="47"
                  font-size="12"
                  fill="#F44336"
                  font-weight="700"
                >
                  Œ≤ ‚â† 90¬∞
                </text>
              </g>

              <!-- Info box -->
              <rect
                x="15"
                y="260"
                width="250"
                height="45"
                fill="#FFEBEE"
                stroke="#F44336"
                stroke-width="1"
                rx="6"
              />
              <text
                x="25"
                y="275"
                font-size="10"
                fill="#C62828"
                font-weight="600"
              >
                ‚ö† Tabuleiro Esconso
              </text>
              <text x="25" y="287" font-size="10" fill="#C62828">
                ‚ö† Geometria Complexa
              </text>
              <text x="25" y="299" font-size="10" fill="#C62828">
                ‚ö† Armaduras Especiais
              </text>
            </g>

            <!-- Legenda moderna -->
            <g transform="translate(350, 430)">
              <rect
                x="0"
                y="0"
                width="500"
                height="40"
                fill="#F8F9FA"
                stroke="#DEE2E6"
                stroke-width="1"
                rx="6"
              />

              <rect
                x="20"
                y="15"
                width="20"
                height="10"
                fill="url(#riverGradient)"
                rx="2"
              />
              <text
                x="45"
                y="24"
                font-size="11"
                fill="#495057"
                font-weight="500"
              >
                Rio
              </text>

              <rect
                x="100"
                y="15"
                width="20"
                height="10"
                fill="url(#deckGradient)"
                rx="2"
              />
              <text
                x="125"
                y="24"
                font-size="11"
                fill="#495057"
                font-weight="500"
              >
                Tabuleiro
              </text>

              <rect
                x="200"
                y="15"
                width="20"
                height="10"
                fill="url(#roadGradient)"
                rx="2"
              />
              <text
                x="225"
                y="24"
                font-size="11"
                fill="#495057"
                font-weight="500"
              >
                Rodovia
              </text>

              <line
                x1="300"
                y1="20"
                x2="320"
                y2="20"
                stroke="#FFD54F"
                stroke-width="3"
                stroke-dasharray="8,4"
              />
              <text
                x="325"
                y="24"
                font-size="11"
                fill="#495057"
                font-weight="500"
              >
                Faixa Central
              </text>

              <text
                x="420"
                y="24"
                font-size="11"
                fill="#495057"
                font-weight="500"
              >
                üìê Œ±, Œ≤ = √Çngulos de esconsidade
              </text>
            </g>
          </svg>
        </div>

        <div class="diagram-explanation">
          <h3>üìã An√°lise dos Tipos de Esconsidade</h3>
          <ul>
            <li>
              <strong>Caso 1 - SEM Esconsidade:</strong> Rio perpendicular √†
              rodovia (90¬∞). Tabuleiro retangular com c√°lculo estrutural padr√£o.
            </li>
            <li>
              <strong>Caso 2 - COM Esconsidade (NO-SE):</strong> Rio diagonal
              noroeste-sudeste. Tabuleiro em formato de paralelogramo com
              geometria complexa.
            </li>
            <li>
              <strong>Caso 3 - COM Esconsidade (NE-SO):</strong> Rio diagonal
              nordeste-sudoeste. Tabuleiro esconso oposto, exigindo formas
              especiais.
            </li>
          </ul>
        </div>
      </div>

      <div class="input-section">
        <!-- CSV 1 -->
        <div class="csv-section">
          <div class="section-title">üìç CSV 1 - Primeira Estrutura</div>
          <textarea
            id="csvData1"
            placeholder="Cole aqui os dados do primeiro CSV..."
          ></textarea>
          <div class="example-buttons">
            <button onclick="loadExample1()" class="example-btn">
              üìù Exemplo CSV 1 (Lat/Long)
            </button>
            <button onclick="loadExample1UTM()" class="example-btn">
              üìù Exemplo CSV 1 (UTM)
            </button>
            <button onclick="loadExample1NewFormat()" class="example-btn">
              üìù Novo Formato (CODE/LAT/LONG/H_GEO)
            </button>
          </div>
        </div>

        <!-- CSV 2 -->
        <div class="csv-section">
          <div class="section-title">üìç CSV 2 - Segunda Estrutura</div>
          <textarea
            id="csvData2"
            placeholder="Cole aqui os dados do segundo CSV (opcional)..."
          ></textarea>
          <div class="example-buttons">
            <button onclick="loadExample2()" class="example-btn">
              üìù Exemplo CSV 2 (UTM)
            </button>
          </div>
        </div>
      </div>

      <div class="controls">
        <button onclick="processData()">üîÑ Processar e Analisar</button>
        <button onclick="clearAll()" style="background: #dc3545">
          üóëÔ∏è Limpar Tudo
        </button>
        <div class="zoom-controls">
          <button onclick="zoomOut()" style="background: #6c757d">üîç-</button>
          <span id="zoomLevel">Zoom: 200%</span>
          <button onclick="zoomIn()" style="background: #6c757d">üîç+</button>
          <button
            onclick="resetZoom()"
            style="background: #17a2b8; margin-left: 10px"
          >
            ‚Üª Reset
          </button>
          <button
            onclick="rotate45()"
            style="background: #28a745; margin-left: 15px"
          >
            üîÑ Rotacionar 22.5¬∞
          </button>
        </div>
      </div>

      <div class="legend">
        <strong>üé® Legenda de Cores (Eleva√ß√£o):</strong>
        <div class="legend-item">
          <span class="legend-color" style="background: #4caf50"></span>
          <span>Eleva√ß√£o Baixa</span>
        </div>
        <div class="legend-item">
          <span class="legend-color" style="background: #ffeb3b"></span>
          <span>Eleva√ß√£o M√©dia</span>
        </div>
        <div class="legend-item">
          <span class="legend-color" style="background: #ff9800"></span>
          <span>Eleva√ß√£o Alta</span>
        </div>
        <div class="legend-item">
          <span class="legend-color" style="background: #f44336"></span>
          <span>Eleva√ß√£o Muito Alta</span>
        </div>
        <br />
        <strong>üìè Informa√ß√µes dos Pontos:</strong>
        <span
          >Glob = Eleva√ß√£o Global | Rel = Eleva√ß√£o Relativa ao ponto mais alto
          (0,00m)</span
        >
        <br />
        <strong>üìê An√°lise de Esconsidade:</strong>
        <span
          >√Çngulo = Desvio da perpendicularidade | Largura √ötil = Largura √ó
          cos(√¢ngulo) | ŒîX/ŒîY = Componentes de dist√¢ncia</span
        >
        <br />
        <strong>üìã Formatos Suportados:</strong>
        <span
          >LAT/LONG | H_ORTHO/H_ORTO | H_GEO | Leste/Norte/Elev |
          Easting/Northing | CODE/Ponto | M√∫ltiplos formatos CSV com detec√ß√£o
          autom√°tica de zona SIRGAS 2000</span
        >
      </div>

      <div class="visualization">
        <canvas id="canvas" width="1100" height="800"></canvas>
      </div>

      <div id="infoPanel" class="info-panel" style="display: none">
        <h3>üìä Relat√≥rio de An√°lise T√©cnica - Inclina√ß√µes e Esconsidade</h3>
        <div id="distanceInfo" class="distance-grid"></div>

        <!-- Resumo Executivo -->
        <div
          id="executiveSummary"
          style="
            margin-top: 20px;
            padding: 15px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 8px;
            border-left: 4px solid #007bff;
          "
        ></div>

        <!-- Se√ß√£o de Metodologia -->
        <div class="methodology-section">
          <h4 style="margin: 0 0 15px 0; color: #495057; text-align: center">
            üìê Metodologia de An√°lise Aplicada
          </h4>
          <div class="methodology-grid">
            <div class="methodology-card methodology-transversal">
              <div
                style="font-weight: bold; color: #d32f2f; margin-bottom: 8px"
              >
                üîÑ INCLINA√á√ïES TRANSVERSAIS (‚â§5%)
              </div>
              <div style="font-size: 13px; color: #666; line-height: 1.4">
                <strong>‚úì LD_IN√çCIO ‚Üî LE_IN√çCIO</strong><br />
                <em>Lado direito com lado esquerdo no mesmo ponto</em
                ><br /><br />
                <strong>‚úì LD_FINAL ‚Üî LE_FINAL</strong><br />
                <em>Lado direito com lado esquerdo no mesmo ponto</em>
              </div>
            </div>
            <div class="methodology-card methodology-longitudinal">
              <div
                style="font-weight: bold; color: #ff9800; margin-bottom: 8px"
              >
                ‚ÜïÔ∏è INCLINA√á√ïES LONGITUDINAIS (‚â§2,5%)
              </div>
              <div style="font-size: 13px; color: #666; line-height: 1.4">
                <strong>‚úì LD_IN√çCIO ‚Üî LD_FINAL</strong><br />
                <em>Mesmo lado direito entre pontos</em><br /><br />
                <strong>‚úì LE_IN√çCIO ‚Üî LE_FINAL</strong><br />
                <em>Mesmo lado esquerdo entre pontos</em>
              </div>
            </div>
            <div class="methodology-card methodology-skew">
              <div
                style="font-weight: bold; color: #2196f3; margin-bottom: 8px"
              >
                üìê AN√ÅLISE DE ESCONSIDADE
              </div>
              <div style="font-size: 13px; color: #666; line-height: 1.4">
                <strong>‚úì √Çngulo de Esconsidade</strong><br />
                <em>Desvio da perpendicularidade</em><br /><br />
                <strong>‚úì Largura √ötil = Largura √ó cos(Œ∏)</strong><br />
                <em>Largura efetiva para ve√≠culos</em>
              </div>
            </div>
          </div>
          <div
            style="
              text-align: center;
              margin-top: 12px;
              font-size: 12px;
              color: #6c757d;
            "
          >
            <strong>Boas Pr√°ticas da Engenharia de Pontes</strong> - Sistema
            automatizado de an√°lise t√©cnica de tabuleiros com detec√ß√£o de
            esconsidade
          </div>
        </div>
      </div>

      <div id="errorMsg"></div>
      <div id="debugInfo" class="debug-info" style="display: none"></div>
    </div>

    <!-- Script principal carregado dinamicamente -->
    <script>
      window.addEventListener("DOMContentLoaded", function () {
        const script = document.createElement("script");
        script.src = "./js/tools/survey_points_visualizer/dist/main.obf.js";
        document.body.appendChild(script);
      });
    </script>
  </body>
</html>
